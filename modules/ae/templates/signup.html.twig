<script type="text/javascript" charset="utf-8" src="https://akshay.dev.appreciationengine.com/framework/js/429"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>


        <div id="signup">
            <div class="panel-heading" style="background: #000; color:#fff;">Social Signup</div>
            <div class="panel-body" style="padding: 15px 30px;">
                {% for social in socials %}
                    <a href="#" data-ae-register-link="{{ social|lower }}" class="ae-btn btn btn-default">{{social}}</a>
                {% endfor %}
            </div>

            {% if want_email == 0 %}

            <div class="panel-heading" style="background: #000; color:#fff;">Email Signup</div>
            <div class="panel-body" style="padding: 15px 30px;">
                <form id="email-signup" data-ae-register-form="email" method="post">
                    <div class="form-group">
                        <label for="email">Email address</label>
                        <input type="email" class="form-control" id="email" name="email" aria-describedby="emailHelp" placeholder="Enter email">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                    </div>
                    <button type="submit" class="btn btn-primary">Sign Up!</button>
                </form>
            </div>

            {% endif %}

        </div>
        <div id="additional-data" style="display: none;">
            <div class="panel-heading" style="background: #000; color:#fff;">Additional Information Required</div>
            <div class="panel-body" style="padding: 15px 30px;">
                <form id="additional-data-form" data-ae-register-form="email" method="post">
                    {% for field in fields %}
                            {% if field == 'email' %}
                                <div>
                                    <label for="email">Email &nbsp;&nbsp;</label>
                                    <input id="email" name="email" type="email">
                                </div>
                            {% endif %}

                            {% if field == 'birthdate' %}
                                <div>
                                    <label for="birthdate">Birthdate &nbsp;&nbsp;</label>
                                    <input id="birthdate" name="birthdate" type="date">
                                </div>
                            {% endif %}

                            {% if field == 'address' %}
                                <div>
                                    <label for="address">Address 1 &nbsp;&nbsp;</label>
                                    <input id="address" name="address" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'addressline2' %}
                                <div>
                                    <label for="addressline2">Address 2 &nbsp;&nbsp;</label>
                                    <input id="addressline2" name="addressline2" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'city' %}
                                <div>
                                    <label for="city">City &nbsp;&nbsp;</label>
                                    <input id="city" name="city" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'state' %}
                                <div>
                                    <label for="state">State &nbsp;&nbsp;</label>
                                    <input id="state" name="state" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'homephone' %}
                                <div>
                                    <label for="homephone">Home Phone &nbsp;&nbsp;</label>
                                    <input id="homephone" name="homephone" type="number">
                                </div>
                            {% endif %}

                            {% if field == 'mobilephone' %}
                                <div>
                                    <label for="mobilephone">Mobile &nbsp;&nbsp;</label>
                                    <input id="mobilephone" name="mobilephone" type="number">
                                </div>
                            {% endif %}

                            {% if field == 'firstname' %}
                                <div>
                                    <label for="firstname">Firstname &nbsp;&nbsp;</label>
                                    <input id="firstname" name="firstname" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'surname' %}
                                <div>
                                    <label for="surname">Lastname &nbsp;&nbsp;</label>
                                    <input id="surname" name="surname" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'website' %}
                                <div>
                                    <label for="website">Website &nbsp;&nbsp;</label>
                                    <input id="website" name="website" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'bio' %}
                                <div>
                                    <label for="bio">Bio &nbsp;&nbsp;</label>
                                    <input id="bio" name="bio" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'gender' %}
                                <div>
                                    <label for="gender">Gender &nbsp;&nbsp;</label>
                                    <input id="gender" name="gender" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'postcode' %}
                                <div>
                                    <label for="postcode">Zip &nbsp;&nbsp;</label>
                                    <input id="postcode" name="postcode" type="text">
                                </div>
                            {% endif %}

                            {% if field == 'country' %}
                                <div>
                                    <label for="country">Country &nbsp;&nbsp;</label>
                                    <input id="country" name="country" type="text">
                                </div>
                            {% endif %}


                        {% endfor %}
                        
                        <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>

        <div id="loggedin" style="display: none;">
<a href="#" data-ae-logout-link="true" class="btn btn-danger">LOGOUT</a>
</div>









<script type="text/javascript">


function AEJSReady(aeJS) {

    var social_logins = "";
    {% for social in socials %}
        social_logins += '{{ social|lower }}{% if not loop.last %},{% endif %}';
    {% endfor %}

    var auth_window = {{auth_window}} == 0 ? true : false;
    var sso = {{sso}} == 0 ? "application" : "local";
    

	globalAEJS = aeJS;

	console.log("AEJS READY, hello world from AE twig");
	
	aeJS.settings['auth_window'] = auth_window;
	aeJS.settings['services'] = social_logins;
    aeJS.settings['sso'] = sso;
    aeJS.settings['flow_css'] = '{{ flow_css }}';
    

    var extraFieldOptions = {};
    {% for field in fields %}
        extraFieldOptions['{{ field }}'] = { 'required': true };
    {% endfor %}
    console.log(extraFieldOptions);
    //aeJS.settings['extra_fields_screen'] = 'after'; 
    aeJS.settings['extra_fields'] = extraFieldOptions;

	aeJS.events.onFlow.addHandler(flowHandler);
	aeJS.events.onLogin.addHandler(loginHandler);
	aeJS.events.onUser.addHandler(userHandler);
	aeJS.events.onLogout.addHandler(logoutHandler);
	aeJS.events.onWindow.addHandler(windowHandler);

}

</script>